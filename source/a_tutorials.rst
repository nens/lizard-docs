=============
API tutorials
=============

Welcome to the Lizard tutorials page! 
On this page you will find walkthroughs for Lizard functionality that requires scripting.
We created interactive manuals for data scientists to use the Lizard API. 

To be able to work with these packages you need to install a virtual environment with the right packages.
The requirements file, which can be used to install the virtual environment, can be downloaded through the link below:

| `Virtual Environment Requirements <https://demo.lizard.net/media/tutorials/requirements.txt>`_

.. tip:: 
	To quickly create a virtual environment using `pip` do the following:

	1. Create a new virtual environment: 'python -m venv /path/to/folder/environment_name'
	2. Activate the virtual environment: '/path/to/folder/environment_name/Scripts/activate'
	3. Install the modules with pip: 'pip install -r requirements.txt'


Once you have a working virtual environment you are ready to start experimenting! 
To get familiar with the Lizard API we offer two manuals:


1. Interactive Time Series API manual 
-------------------------------------

Timeseries lend themselves well to scripting because of their dynamic nature.
Manually adjusting data every week, day, or hour is not very efficient.
Through the API you are able to post or retrieve data with a basic python script.
For both users and suppliers of timeseries data the API offers a lot of tools.

If you are monitoring data, its easy to have a script running that posts new data to Lizard whenever it is available.
We store this information for you, and with another API call you are able to access all data posted to the timeseries of interest.

To learn how to use the timeseries endpoint of the API, start off running with the Timeseries API V4 tutorial:

| `Notebook for /api/v4/timeseries <https://demo.lizard.net/media/tutorials/Lizard_Time_Series_API_V4_Tutorial.ipynb>`_


2. Interactive Rasters API manual
---------------------------------

For modelling purposes Lizard can be a great source of data.
In the next manual you will learn to how to import, export and use rasters from the API through python.


| `Notebook for /api/v4/rasters <https://demo.lizard.net/media/tutorials/Getting_familiair_with_Lizard_Rasters_API.ipynb>`_


3. Download script
------------------

Our developers have written a script that allows you to download a set of rasters.
To be able to use it you should provide an API key within a file, or as a command with `--api_key` followed by the `API_KEY`.
Furthermore, a list of uuids belonging to the rasters you would like to download should be provided as an Excel file through the command `--excel_path` followed by the `path/to/excel.xlsx`.


| `Download script for /api/v4/rasters <https://demo.lizard.net/media/tutorials/export_lizard_raster_layers.py>`_


4. Learn to retrieve scenarios from the Lizard API
--------------------------------------------------

While the tutorial below can still be useful, it should be noted that the `Lizard Plugin <b_lizardplugin.rst#Simulations-results>`_ is now available to download scenario data through QGIS or the Modellers Interface (3Di).

For an example of how to use scenario information generated by 3Di through the Lizard API:

| `Notebook for 3Di results / Scenarios in Lizard <https://demo.lizard.net/media/tutorials/How_to_download_a_maximum_waterdepth_raster_from_a_3Di_scenario_stored_in_the_Scenario_Archive_in_Lizard_.ipynb>`_


.. note::
	API v4 is the stable API version. API v3 is deprecated since june 2023.

.. note::
	If you would like to have a tutorial on a specific subject, please inform the `servicedesk <mailto:servicedesk@nelen-schuurmans.nl>`_.
